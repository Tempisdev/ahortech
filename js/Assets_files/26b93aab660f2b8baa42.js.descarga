(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"019a":function(e,t,i){"use strict";var r=i("8ff6"),n=i.n(r);n.a},"0a2e":function(e,t,i){},"0c79":function(e,t,i){"use strict";var r=i("0a2e"),n=i.n(r);n.a},3622:function(e,t,i){"use strict";var r=i("ba79"),n=i.n(r);n.a},"3f84":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row center justify-center formatter-text"},[i("div",{staticClass:"main col-xs-12 col-sm-9 col-md-6 col-lg-6 col-xl-3 text-primary formatter-text",staticStyle:{"font-size":"large","font-weight":"bold","text-align":"left"}},[i("q-list",{attrs:{dense:""}},[i("p"),i("q-item",{attrs:{"inset-level":0}},[i("p",{staticStyle:{"font-size":"x-large"}},[e._v(" "+e._s(e.mapParagraph.title))])]),e._l(e.mapParagraph.items,(function(t,r){return i("div",{key:"para"+r,staticClass:"paragraphs"},[i("q-item",{attrs:{"inset-level":1,dense:""}},[t.indexOf("http")>-1?i("div",{staticStyle:{"font-size":"large","font-weight":"normal"}},[i("a",{attrs:{href:t}},[i("b",[e._v(e._s(t))])])]):i("div",{staticStyle:{"font-size":"large","font-weight":"normal"}},[e._v("\n            "+e._s(t)+"\n          ")])])],1)}))],2)],1)])},n=[],a={name:"FormatterText",components:{},props:["mapParagraph"]},o=a,s=i("2877"),l=i("1c1c"),c=i("66e5"),u=i("eebe"),d=i.n(u),m=Object(s["a"])(o,r,n,!1,null,null,null);t["a"]=m.exports;d()(m,"components",{QList:l["a"],QItem:c["a"]})},"515a":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-sm q-gutter-md   row justify-center"},[i("div",{staticClass:"col-center"},[i("q-list",[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-primary",attrs:{clickable:"",dense:!1},nativeOn:{click:function(t){return e.junpToTwitter(t)}}},[i("q-item-section",[i("q-badge",{attrs:{color:"white"}},[i("img",{staticStyle:{"max-width":"128px"},attrs:{src:"https://cdn.deepsukebe.io/statics/twitter.svg"}})])],1)],1)],1)],1)])},n=[],a=i("b06b"),o={name:"ListFeedback",data:function(){return{active:!0}},methods:{junpToTwitter:function(){Object(a["a"])("http://twitter.com/deepsukebeio")}}},s=o,l=i("2877"),c=i("1c1c"),u=i("66e5"),d=i("4074"),m=i("58a8"),g=i("714f"),f=i("eebe"),p=i.n(f),h=Object(l["a"])(s,r,n,!1,null,null,null);t["a"]=h.exports;p()(h,"components",{QList:c["a"],QItem:u["a"],QItemSection:d["a"],QBadge:m["a"]}),p()(h,"directives",{Ripple:g["a"]})},5247:function(e,t,i){"use strict";var r=i("a78d"),n=i.n(r);n.a},"715f":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"descriptor"},[i("p"),i("q-list",{staticClass:"rounded-borders "},[i("q-expansion-item",{attrs:{"expand-separator":!1,"default-opened":e.listFlgOpened[0],label:e.mapDescription.title,"switch-toggle-side":"","content-inset-level":e.listLevelInsert[0],"header-class":"text-primary","header-style":"font-size:xx-large; font-weight:bold","expand-icon":e.iconDropDown,"expanded-icon":e.iconDropUo}},[e.mapDescription.items.length>0?i("div",{staticClass:"text-primary"},e._l(e.mapDescription.items,(function(t,r){return i("div",{key:"item"+r,staticClass:"descriptor-items"},[i("b",[i("q-expansion-item",{attrs:{"expand-separator":!1,label:t.summary,"switch-toggle-side":"","default-opened":e.listFlgOpened[1],"content-inset-level":e.listLevelInsert[1],"header-class":"text-primary","header-style":"font-size:x-large; font-weight:bold","expand-icon":e.iconDropDown,"expanded-icon":e.iconDropUo}},[t.lines.length>0?i("div",{staticClass:"descriptor-lines text-primary ",staticStyle:{"font-weight":"normal"}},e._l(t.lines,(function(t,n){return i("div",{key:"line"+n,class:"item"+r+"_line"+n},["component"===t.split(":")[0]?i("div",["table-commonuser-history-remaining"===t.split(":")[1]?i("div",[i("TableCommonuserHistoryRemaiing",{staticClass:"items-left"})],1):"table-referral-history-cumulative"===t.split(":")[1]?i("div",[i("TableReferralHistoryCumulative",{staticClass:"items-left"})],1):"table-referral-history-remaining"===t.split(":")[1]?i("div",[i("TableReferralHistoryRemaiing",{staticClass:"items-left"})],1):e._e()]):"#"===t[0]?i("div",["strike"===t.split("#")[1]?i("div",[i("strike",[e._v("\n                        "+e._s(t.split("#")[2])+"\n                      ")])],1):e._e()]):"string"===typeof t?i("q-item",{attrs:{"inset-level":e.listLevelInsert[2],dense:!0,"manual-focus":!1,clickable:e.flgclickable},nativeOn:{click:function(t){return e.funcClick(r,n)}}},[e._v("\n\n                    "+e._s(t)+"\n\n                  ")]):e._e()],1)})),0):e._e()])],1)])})),0):e._e()])],1),i("p")],1)},n=[],a=i("06ae"),o=(i("8e6e"),i("8a81"),i("ac6a"),i("cadf"),i("06db"),i("456d"),i("c47a")),s=i.n(o),l=i("2f62"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-history offset-1 text-primary ",staticStyle:{"max-width":"496px"}},[i("q-table",{attrs:{"pagination-label":function(e,t,i){return e+"-"+t+" / "+i},"wrap-cells":"",title:e.getLabelTable,data:e.listMapHistory,columns:e.getColumnTable,"row-key":"index",dense:!0,flat:"",color:"primary","table-style":{color:"#ff0088"},"card-container-style":{color:"#ff0088"},"card-style":{color:"#ff0088"},"rows-per-page-label":" ",clickable:""},on:{"row-click":e.onClickRow}}),i("div",{staticClass:"text-primary",staticStyle:{"font-size":"small"}},[e._v("\n    "+e._s(this.getStrHintTable)+"\n  ")])],1)},u=[];function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var g={name:"TableHistory",components:{},data:function(){return{filter:"",selected:[],columns:[]}},props:{strHintTable:{type:String,default:""}},methods:{getPagenationLabel:function(e,t,i){return" "},onClickRow:function(e,t,i){this.$loader.modules.utils.writeLog2Console(this,"event detected in TableHistory ".concat(t,", ").concat(i," "))}},computed:m({getStrHintTable:function(){var e="";return e},getLabelTable:function(){var e=this.$t("status/referral/table/history/label");return e},getColumnTable:function(){var e=[{name:"desc",required:!0,label:this.$t("status/referral/table/history/col/counter/label"),align:"left",field:function(e){return e.index},format:function(e){return"".concat(e)},sortable:!0},{name:"quota",align:"center",label:this.$t("status/referral/table/history/col/quota/label"),field:"quota",sortable:!1},{name:"datetime",align:"center",label:this.$t("status/referral/table/history/col/datetime/label")+" "+this.$t("common/unit/datetime/standards"),field:"datetime",sortable:!1}];return e}},Object(l["b"])({listMapHistory:"referral/getListMapHistory"}))},f=g,p=(i("c7f0"),i("2877")),h=i("eaac"),b=i("8572"),v=i("eebe"),_=i.n(v),y=Object(p["a"])(f,c,u,!1,null,null,null),w=y.exports;function $(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}_()(y,"components",{QTable:h["a"],QField:b["a"]});var x,P,S={extends:w,name:"TableReferralHistoryCumulative",components:{},data:function(){return{}},methods:{onClickRow:function(e,t,i){this.$loader.modules.utils.writeLog2Console(this,"event detected in TableReferralHistoryCumulative ".concat(t,", ").concat(i," "))}},computed:k({getStrHintTable:function(){var e="";return e},getColumnTable:function(){var e=[{name:"desc",required:!0,label:this.$t("status/referral/table/history/col/counter/label"),align:"left",field:function(e){return e.index},format:function(e){return"".concat(e)},sortable:!0},{name:"quota",align:"center",label:this.$t("status/referral/table/history/col/quota/label"),field:"quota",sortable:!1},{name:"dif_action",align:"center",label:this.$t("status/referral/table/history/col/quota/dif/label"),field:"dif_action",sortable:!1},{name:"datetime",align:"center",label:this.$t("status/referral/table/history/col/datetime/label")+" "+this.$t("common/unit/datetime/standards"),field:"datetime",sortable:!1}];return e}},Object(l["b"])({listMapHistory:"referral/getlistMapHistoryCumulative"}))},C=S,D=(i("a278"),Object(p["a"])(C,x,P,!1,null,null,null)),R=D.exports;function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}_()(D,"components",{QTable:h["a"],QField:b["a"]});var q,I,T={extends:w,name:"TableReferralHistoryRemaiing",components:{},data:function(){return{}},methods:{onClickRow:function(e,t,i){this.$loader.modules.utils.writeLog2Console(this,"event detected in TableReferralHistoryRemaiing ".concat(t,", ").concat(i," "))}},computed:L({getStrHintTable:function(){var e="";return e},getLabelTable:function(){var e=this.$t("status/referral/table/history/remaining/label");return e},getColumnTable:function(){var e=[{name:"desc",required:!0,label:this.$t("status/referral/table/history/col/counter/label"),align:"left",field:function(e){return e.index},format:function(e){return"".concat(e)},sortable:!0},{name:"quota",align:"center",label:this.$t("status/referral/table/history/col/quota/remaining/label"),field:"quota",sortable:!1},{name:"dif_action",align:"center",label:this.$t("status/referral/table/history/col/quota/dif/label"),field:"dif_action",sortable:!1},{name:"datetime",align:"center",label:this.$t("status/referral/table/history/col/datetime/label")+" "+this.$t("common/unit/datetime/standards"),field:"datetime",sortable:!1}];return e}},Object(l["b"])({listMapHistory:"referral/getlistMapHistoryRemaining"}))},U=T,F=(i("e16a"),Object(p["a"])(U,q,I,!1,null,null,null)),M=F.exports;_()(F,"components",{QTable:h["a"],QField:b["a"]});var j=i("967e"),z=i.n(j),A=(i("551c"),i("96cf"),i("fa84")),H=i.n(A),B=i("bc3a"),N=i.n(B),E=i("bd4c");function W(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function Q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?W(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var V,Y,K={extends:w,name:"TableCommonuserHistoryRemaiing",components:{},data:function(){return{}},methods:{_saveDownloadedImage:function(e,t,i,r){var n=this;return H()(z.a.mark((function a(){var o,s;return z.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve(e);case 2:if(e=a.sent,o=n.$store,s=new FileReader,s.onload=function(e){var n=r;return r||(n=E["a"].formatDate(Date(),"YYYY-MM-DDTHH:mm:ss")),o.commit("predictor/addPredictedImage",{name:t,image:e.target.result,hash:i,datetime:n}),!0},!e){a.next=11;break}return s.readAsDataURL(e),a.abrupt("return",!0);case 11:return a.abrupt("return",!1);case 12:case"end":return a.stop()}}),a)})))()},_downloadImage:function(e){var t=this,i="".concat(e,".jpg"),r="https://".concat(this.$loader.configs.predictor.backendHostStore,"/images/").concat(i);return N()({url:r,method:"GET",responseType:"blob"}).then((function(e){var r=e.data;return t.$loader.configs.flgDev&&console.log("successfully downloaded image ->",i),r})).catch((function(e){return t.$loader.configs.flgDev&&console.log("fail to downloaded image ->",i),t.$loader.configs.flgDev&&console.error(e),!1}))},downloadAndSaveImage:function(e,t,i){var r=this;this.$loader.configs.flgDev&&console.log("try to download predicted assets for not found in global store");var n=this._downloadImage(e),a=Promise.resolve(this._saveDownloadedImage(n,t,e,i));Promise.resolve(a).then((function(e){null!==!e&&void 0!==e&&!1!==e?r.$messenger.notifyWithPop(r,r.$t("premium/expansion_ticket_status/downloader/message/on_success")+t):r.$messenger.notifyWithPop(r,r.$t("premium/expansion_ticket_status/downloader/message/on_fail"))})).catch((function(e){r.$messenger.notifyWithPop(r,r.$t("premium/expansion_ticket_status/downloader/message/on_fail")),r.$loader.configs.flgDev&&console.error(e)}))},onClickRow:function(e,t,i){this.$loader.modules.utils.writeLog2Console(this,"event detected in TableCommonuserHistoryRemaiing ".concat(t,", ").concat(i," "));var r=this.listMapHistory,n=r[i],a=n["hash"],o=n["datetime"];a&&(this.$loader.modules.utils.writeLog2Console(this,"strHash in TableCommonuserHistoryRemaiing ".concat(a," ")),this.downloadAndSaveImage(a,a.slice(0,6)+"...",o))}},computed:Q({getStrHintTable:function(){var e=this.$t("status/api/table/history/remaining/hint/1");return e},getLabelTable:function(){var e=this.$t("status/referral/table/history/remaining/label");return e},getColumnTable:function(){var e=[{name:"desc",required:!0,label:this.$t("status/referral/table/history/col/counter/label"),align:"left",field:function(e){return e.index},format:function(e){return"".concat(e)},sortable:!0},{name:"quota",align:"center",label:this.$t("status/referral/table/history/col/quota/remaining/label"),field:"quota",sortable:!1},{name:"dif_action",align:"center",label:this.$t("status/referral/table/history/col/quota/dif/label"),field:"dif_action",sortable:!1},{name:"datetime",align:"center",label:this.$t("status/referral/table/history/col/datetime/label")+" "+this.$t("common/unit/datetime/standards"),field:"datetime",sortable:!1}];return e}},Object(l["b"])({listMapHistory:"usercommon/getlistMapHistoryRemaining"}))},G=K,J=(i("0c79"),Object(p["a"])(G,V,Y,!1,null,null,null)),X=J.exports;_()(J,"components",{QTable:h["a"],QField:b["a"]});var Z={name:"ExpansionDescriptor",components:{TableReferralHistoryCumulative:R,TableReferralHistoryRemaiing:M,TableCommonuserHistoryRemaiing:X},props:{mapDescription:{type:Object,default:function(){return{}}},listLevelInsert:{type:Array,default:function(){var e=0;return this.$q.screen.xs&&(e=this.$loader.configs.layout.numberInsertLevelResponsive),[this.$loader.configs.layout.numberInsertLevelResponsive,this.$loader.configs.layout.numberInsertLevelResponsive,e]}},listFlgOpened:{type:Array,default:function(){return[!this.$q.screen.xs,!this.$q.screen.xs]}},flgclickable:{type:Boolean,default:!1},funcClick:{type:Function,default:function(){return{}}}},data:function(){return{iconUp:a["h"],iconCancel:a["f"],iconPick:a["b"],iconPic:a["l"],iconComp:a["i"],iconOK:a["g"],iconDropDown:a["d"],iconDropDown2:a["c"],iconDropUo:a["e"]}},methods:{}},ee=Z,te=(i("019a"),i("1c1c")),ie=i("3b73"),re=i("66e5"),ne=Object(p["a"])(ee,r,n,!1,null,null,null);t["a"]=ne.exports;_()(ne,"components",{QList:te["a"],QExpansionItem:ie["a"],QItem:re["a"]})},"755a":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-list",[e._l(e.predictorlistMapImageUploaded,(function(t,r){return i("q-item",{key:r.toString()},[i("q-space"),i("croppa",{attrs:{disabled:!1,"prevent-white-space":!0,"show-remove-button":!1,"auto-sizing":!0,width:t.width-1,height:t.height-1,quality:1},model:{value:e.listCroppaOri[r],callback:function(t){e.$set(e.listCroppaOri,r,t)},expression:"listCroppaOri[index]"}},[null===t.image?i("img",{attrs:{slot:"initial",src:"https://cdn.deepsukebe.io/statics/icons/icon-256x256.png"},slot:"initial"}):e._e(),null!==t.image?i("img",{attrs:{slot:"initial",crossOrigin:"Anonymous",src:t.image},slot:"initial"}):e._e()]),i("q-space")],1)})),i("p")],2)},n=[],a=i("81f6"),o={name:"PreviewImage",data:function(){return{listMapImageUploaded:null,listCroppaOri:[]}},computed:{predictorlistMapImageUploaded:{get:function(){var e=this.$store.getters["predictor/getUploadedImage"],t=this.$store.getters["predictor/getMaxNumberFile"],i=e.length;return 0===e.length?null:e.slice(i-t)}}},watch:{listCroppaOri:function(){for(var e=this.listCroppaOri.length,t=this.listCroppaOri,i=0;i<e;i++){var r=t[i],n=r.getCanvas();n.style.height="auto",n.style.width="100%"}a["a"].$emit("onUpdateCropa",this.listCroppaOri)}}},s=o,l=(i("5247"),i("2877")),c=i("1c1c"),u=i("66e5"),d=i("2c91"),m=i("eebe"),g=i.n(m),f=Object(l["a"])(s,r,n,!1,null,"fc58dd30",null);t["a"]=f.exports;g()(f,"components",{QList:c["a"],QItem:u["a"],QSpace:d["a"]})},"7c8a":function(e,t,i){},"81f6":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var r=i("2b0e"),n=new r["a"]},"8ff6":function(e,t,i){},"9e58":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-file",{attrs:{value:e.listFile,multiple:"",clearable:!e.isUploading,accept:".jpg,.png,image/*","max-files":e.getMaxNumberFile,label:e.$t("predictor/file_picker/label"),counter:"",rounded:"",outlined:"","bottom-slots":"",color:"primary"},on:{input:e.updateFiles},scopedSlots:e._u([{key:"prepend",fn:function(){return[i("q-icon",{attrs:{name:e.iconPick,color:"primary"},on:{click:function(e){e.stopPropagation()}}})]},proxy:!0},{key:"file",fn:function(t){var r=t.index,n=t.file;return[i("q-chip",{staticClass:"full-width q-my-xs",attrs:{removable:e.isUploading&&e.listMapProgress[r].percent<1,square:"",color:"primary"},on:{remove:function(t){return e.cancelFile(r)}}},[i("q-linear-progress",{staticClass:"absolute-full full-height",attrs:{value:e.listMapProgress[r].percent,color:e.listMapProgress[r].color,"track-color":"grey-2"}}),i("q-avatar",[i("q-icon",{attrs:{name:e.listMapProgress[r].icon}})],1),i("div",{staticClass:"ellipsis relative-position"},[e._v("\n        "+e._s(n.name)+"\n      ")]),i("q-tooltip",[e._v("\n        "+e._s(n.name)+"\n      ")])],1)]}},e.canUpload?{key:"after",fn:function(){return[i("q-btn",{attrs:{color:"primary",dense:"",icon:e.iconUp,round:"",disable:!e.getFlgDisableButtonUpload,loading:e.isUploading},on:{click:e.upload}})]},proxy:!0}:null,{key:"hint",fn:function(){return[e._v("\n    "+e._s(e.messageHintFileSize)+" "+e._s(e.messageHintImageSize)+" "+e._s(e.messageHintPredictInterval)+"\n  ")]},proxy:!0}],null,!0)})},n=[],a=(i("8e6e"),i("8a81"),i("f3e3")),o=i.n(a),s=(i("ffc1"),i("456d"),i("ac6a"),i("cadf"),i("5df3"),i("967e")),l=i.n(s),c=(i("551c"),i("06db"),i("96cf"),i("fa84")),u=i.n(c),d=(i("7f7f"),i("c47a")),m=i.n(d),g=(i("c5f6"),i("bc3a")),f=i.n(g),p=i("0753"),h=i("2f62"),b=i("bd4c"),v=i("06ae"),_=i("81f6");function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function w(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){m()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var $={data:function(){return{listFile:null,listSizeImage:[],listImage:null,listMapProgress:[],flgProgressing:null,mapResponseUpload:null,listCroppa:[],mapTicket:{},mapAPI:{},mapSetting:{},flgDisableButtonUpload:!1,NumberLeadTimeDownload:this.$loader.configs.predictor.NumberLeadTimeDownload,maxPercentProgress:this.$loader.configs.predictor.maxPercentProgress,maxSLO:this.$loader.configs.predictor.maxSLO,minRetry:this.$loader.configs.predictor.minRetry,minIntervalPredictCurrent:null,minIntervalAPISessionCurrent:0,maxNumberFile_:1,backendHost:this.$loader.configs.predictor.backendHost,backendHostStore:this.$loader.configs.predictor.backendHostStore,backendNameStage:this.$loader.configs.predictor.backendNameStage,iconUp:v["h"],iconCancel:v["f"],iconPick:v["b"],iconPic:v["l"]}},props:{maxSizeFile:{default:-1,type:Number},maxSizeWH:{default:-1,type:Number},maxNumberFile:{default:-1,type:Number},minIntervalPredict:{default:99999,type:Number},flgTicket:{default:!1,type:Boolean}},mounted:function(){var e=this;_["a"].$on("onUpdateCropa",(function(t){e.listCroppa=t})),_["a"].$on("onUpdateMapSetting",(function(t){e.mapSetting=t,e.calcMaxnumberFile()}))},computed:w({isUploading:function(){return null!==this.flgProgressing},canUpload:function(){return null!==this.listFile},getFlgDisableButtonUpload:function(){var e=!1;return!1===this.flgDisableButtonUpload&&(e=!0),e},getMaxNumberFile:function(){return this.$loader.modules.utils.writeLog2Console(this,"_maxNumberFilee -> ".concat(this.maxNumberFile_)),this.maxNumberFile_},messageHintFileSize:function(){return"*".concat(this.$t("predictor/uploader/hint/filesize/label"),"[ ").concat(this.maxSizeFile/1e3,"KB > ]")},messageHintPredictInterval:function(){var e=this.minIntervalPredict/1e3;if(e<=15&&e>=0)return"*".concat(this.$t("predictor/uploader/hint/interval/label"),"[ ").concat(e," ").concat(this.$t("predictor/uploader/hint/interval/unit")," ]");var t=this.minIntervalPredictCurrent||"???";return"*".concat(this.$t("predictor/uploader/hint/interval/label"),"[ ").concat(t," ").concat(this.$t("predictor/uploader/hint/interval/unit")," ]")},messageHintImageSize:function(){return"*".concat(this.$t("predictor/uploader/hint/imagesize/label"),"[ ").concat(this.maxSizeWH,"Px > ]")},getMapAPI:function(){var e={};return e=this.$store.getters["api/getMapAPI"],e},getMapTicket:function(){var e={};return this.flgTicket&&(e=this.$store.getters["ticket/getMapTicket"]),e}},Object(h["b"])({getMapSetting:"setting/getMapSetting"})),watch:{},methods:{calcMaxnumberFile:function(){var e=1;this.maxNumberFile_=e},calcTrialDL:function(e,t,i){var r=(-1*t+Math.sqrt(Math.pow(t,2)-4*e*i))/(2*e),n=(-1*t-Math.sqrt(Math.pow(t,2)-4*e*i))/(2*e),a=Math.max(r,n);return a},checkFile:function(e){return e},getUrl:function(){return""!==this.backendNameStage?"https://"+this.backendHost+"/"+this.backendNameStage+"/apis/predict/inpaint":"https://"+this.backendHost+"/apis/predict/inpaint"},cancelFile:function(e){this.listMapProgress[e]=w(w({},this.listMapProgress[e]),{},{error:!0,color:"negative"}),this.$store.commit("predictor/removeUploadedImage")},__saveUploadedImage:function(e){var t=this,i=this.$store;i.commit("predictor/removeUploadedImage");for(var r=function(){var r=e[n],a=new FileReader;a.onload=function(e){var n=new Image;n.onload=function(){t.listSizeImage.push([n.height,n.width]);var a=Math.max(n.height,n.width);a>t.maxSizeWH+3&&t.$messenger.notifyWithPop(t,t.$t("predictor/uploader/message/on_exceed_size_limit/1")+" < "+t.maxSizeWH+"Px.<br>"+t.$t("predictor/uploader/message/on_exceed_size_limit/2")),i.commit("predictor/addUploadedImage",{name:r.name,image:e.target.result,height:Math.min(t.maxSizeWH,n.height),width:Math.min(t.maxSizeWH,n.width)})},n.src=e.target.result;var a=t.$loader.modules.utils.getValFromUserStorage(t,"test/SUI");a>=0?a+=1:a=1,t.$loader.modules.utils.setVal2UserStorage(t,"test/SUI",a)},r&&a.readAsDataURL(r)},n=0;n<e.length;n++)r()},updateFiles:function(e){this.listFile=e,this.listSizeImage=[],this.maxPercentProgress=this.$loader.configs.predictor.maxPercentProgress,this.listMapProgress=(e||[]).map((function(e){return{error:!1,color:"primary",percent:0,icon:0===e.type.indexOf("video/")?"movie":0===e.type.indexOf("image/")?"photo":0===e.type.indexOf("audio/")?"audiotrack":"insert_drive_file"}})),e&&(this.__saveUploadedImage(e),this.$store.commit("predictor/SetPredictorStep",2))},__checkRatelimitingPaidUser:function(){var e=!1,t=parseInt(this.mapTicket["n_quota_inpaint_image_remaining"],10);return t>0?e=!0:(this.$messenger.notifyWithPop(this,this.$t("predictor/ratelimiter/paid/message/on_no_quota")),e=!1),e},__checkRatelimitingFreeUser:function(e){var t=this;return u()(l.a.mark((function i(){var r,n,a,o,s,c,u,d,m,g,f,p,h,b,v,_,y,w,$,k,x,P;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=!1,n={},a=t.$store.getters["ticket/getFP"],o={HMAC:a},i.next=6,Promise.resolve(t.$loader.modules.requests.getStatus(t,2,n,o));case 6:s=i.sent,c=null,u=null,d=null;try{c=s.data,u=s.status,d=c["n_sec_remaining"],t.$loader.modules.utils.writeLog2Console(t,"successfully get response from checker"),t.$loader.modules.utils.writeLog2Console(t,c),t.$loader.modules.utils.writeLog2Console(t,"numberStatus=".concat(u)),t.$loader.modules.utils.writeLog2Console(t,"numberTTLRemaining=".concat(d))}catch(l){t.$loader.modules.utils.writeLog2Console(t,"error in CRF checker"),t.$loader.modules.utils.writeLog2Console(t,c)}return t.flgDisableButtonUpload=!0,setTimeout((function(){t.flgDisableButtonUpload=!1,t.$loader.modules.utils.writeLog2Console(t,"change state flgDisableButtonUpload -> ".concat(t.flgDisableButtonUpload," : this.$loader.configs.status.minIntervalAPISession=").concat(t.$loader.configs.status.minIntervalAPISession))}),t.$loader.configs.status.minIntervalAPISession),null!==d&&void 0!==d?(m=c["n_ttl_current"],t.minIntervalPredictCurrent=m,t.$loader.modules.utils.writeLog2Console(t,"set current max TTL=".concat(m)),d<=0?r=!0:(g=d+15,f=t.getMapAPI||{},p=parseInt(f["n_quota_inpaint_image_remaining"],10),t.$loader.configs.flgDev&&console.log("check rate limitting numberQuota for Free Mode, with server side  -> "+p),p>0?(r=!0,t.$loader.configs.flgDev&&console.log("bypass rate limitting with server side due to quota -> "+p)):(h=Math.round(g/3*1e3),b=Math.min(h,18e5),t.minIntervalAPISessionCurrent=b,t.$loader.modules.utils.writeLog2Console(t,"session ratelimit set to this.minIntervalAPISessionCurrent=".concat(t.minIntervalAPISessionCurrent,", minIntervalAPISessionCurrentRaw=").concat(h)),v=parseInt(Math.ceil(g/60),10),e.$messenger.notifyWithPop(e,t.$t("predictor/ratelimiter/free/message/in_limiting/1")+"<br>"+v+" "+t.$t("common/unit/min")+"."),203===u&&e.$messenger.notifyWithPop(e,t.$t("predictor/ratelimiter/free/message/in_limiting/3_1")),_=t.$loader.modules.utils.getPermissionLimitting(t,"please_buy_ticket",t.$loader.configs.message.minIntervalBuyTicket),t.$loader.modules.utils.writeLog2Console(t,"numberMsPaymentNotification=".concat(_)),_<=0&&e.$messenger.notifyWithPop(e,t.$t("predictor/ratelimiter/free/message/in_limiting/2")),y=t.$loader.modules.utils.getValFromUserStorage(t,"test/CRLF"),y>=0?y+=1:y=1,t.$loader.modules.utils.setVal2UserStorage(t,"test/CRLF",y),t.$loader.configs.flgDev&&console.log("save counter CRLF =  "+y)),w=Date.now(),$=1e3*g,k=w+$,x=k-t.minIntervalPredict,t.$loader.modules.utils.deleteKeyFromUserStorage(e,"timestamp/prediction"),t.$loader.modules.utils.deleteKeyFromUserStorage(e,"ttl/prediction"),t.$loader.modules.utils.setVal2UserStorage(e,"timestamp/prediction",x),t.$loader.modules.utils.setVal2UserStorage(e,"ttl/prediction",k),t.$loader.configs.flgDev&&(P=t.$loader.modules.utils.getNumberSecRemaining(t,"prediction"),console.log("sync ratelimit time with server - numberSecTimeResidual= ".concat(P,", numberTTLNew = ").concat(g," "))))):203===u?e.$messenger.notifyWithPop(e,t.$t("predictor/ratelimiter/free/message/in_limiting/3_1")):403===u?(e.$messenger.notifyWithPop(e,e.$t("common/api/request/on_error/busy")),e.$messenger.notifyWithPop(e,"CRLF487")):e.$messenger.notifyWithPop(e,"Unknown Error. CRLF489. Please contact us."),i.abrupt("return",r);case 15:case"end":return i.stop()}}),i)})))()},__checkRatelimitingCommon:function(){var e=!1;this.mapTicket=this.getMapTicket||{},this.mapAPI=this.getMapAPI||{};var t=parseInt(this.mapTicket["n_quota_inpaint_image_remaining"],10),i=parseInt(this.mapAPI["n_quota_inpaint_image_remaining"],10),r=0;if(t>0||i>0)r=0,this.$loader.modules.utils.writeLog2Console(this,"bypass common rate - limiting due to numberQuotaRemainingTicket = ".concat(t," numberQuotaRemainingAPI = ").concat(i," "));else{var n=Math.max(this.$loader.configs.status.minIntervalAPISession,this.minIntervalAPISessionCurrent);this.$loader.modules.utils.writeLog2Console(this,"check client side rate limit -> minIntervalAPISession=".concat(n," ")),r=this.$loader.modules.utils.getPermissionLimitting(this,"hit_button_upload_20201124",this.$loader.configs.api.minIntervalAPICommon)}return null===r||void 0===r?(this.$messenger.notifyWithPop(this,"Unknown Error. CRLC668"),this.$messenger.notifyWithPop(this,this.$t("common/api/on_fail/unknown/1")),e):r<=0?(e=!0,this.$loader.modules.utils.writeLog2Console(this,"passed common user rate limitting: ".concat(r," ")),e):r>0?(this.$loader.modules.utils.writeLog2Console(this,"in clientside rate limitting: ".concat(r," ")),e):(this.$messenger.notifyWithPop(this,"Unknown Error. CRLC707"),this.$messenger.notifyWithPop(this,this.$t("common/api/on_fail/unknown/1")),this.$loader.modules.utils.deleteKeyFromUserStorage(this,"hit_button_upload_20201124"),e)},_checkRatelimiting:function(e){var t=this;return u()(l.a.mark((function i(){var r,n,a;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=!1,n=t.__checkRatelimitingCommon(),!n){i.next=13;break}if(a=e.flgTicket,!0!==a){i.next=8;break}r=t.__checkRatelimitingPaidUser(),i.next=11;break;case 8:return i.next=10,t.__checkRatelimitingFreeUser(e);case 10:r=i.sent;case 11:i.next=14;break;case 13:r=!1;case 14:return i.abrupt("return",r);case 15:case"end":return i.stop()}}),i)})))()},_updatelistMapProgress:function(){var e=this,t=!0;this.listMapProgress=this.listMapProgress.map((function(i){if(1===i.percent||!0===i.error)return i;var r=Math.min(e.maxPercentProgress,i.percent+Math.random()/10),n=new Date-i.datetimeStart,a=n>e.maxSLO;return!1===a&&r<1&&(t=!1),w(w({},i),{},{error:a,color:!0===a?"negative":"primary",percent:r})})),this.flgProgressing=!0!==t?setTimeout(this._updatelistMapProgress,333):null},_get_image_from_cropper:function(){for(var e=this.listCroppa.length,t=[],i=0;i<e;i++){var r=this.listCroppa[i],n=this.listFile[i],a=this.listSizeImage[i],o=a[0]*a[1],s=r.width*r.height,l=s/o,c=n.size*l,u=this.maxSizeFile/c;this.$loader.configs.flgDev&&console.log("uploaded blob shrink ratio = "+u),t.push(r.promisedBlob("image/jpeg"))}return Promise.all(t)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},___saveDownloadedImage:function(e,t,i){var r=this,n=this.$store,a=new FileReader;a.onload=function(e){n.commit("predictor/addPredictedImage",{name:t,image:e.target.result,hash:i,datetime:b["a"].formatDate(Date(),"YYYY-MM-DDTHH:mm:ss")});var a=null;if(a=r.mapTicket.id_ticket,a){var o=r.mapTicket["n_quota_inpaint_image_remaining"],s=r.mapTicket["n_quota_inpaint_image_remaining"]-1,l=w(w({},r.mapTicket),{n_quota_inpaint_image_remaining:s}),c=r.$loader.modules.utils.setMap2UserStorageAndInmemory(r,"ticket",l);r.$loader.configs.flgDev&&console.log("change quota for ticket, "+o+" > "+s),r.$loader.configs.flgDev&&console.log("flgSaveMap in uploader = "+c)}else{r.mapAPI=r.getMapAPI;var u=parseInt(r.mapAPI["n_quota_inpaint_image_remaining"],10);if(u>0){r.$loader.configs.flgDev&&console.log("reducing numberQuota for Free Mode  "+u);var d=u-1,m=w(w({},r.mapAPI),{n_quota_inpaint_image_remaining:d});r.$loader.modules.utils.setMap2UserStorageAndInmemory(r,"api",m),r.$loader.configs.flgDev&&console.log("changed numberQuota for Free Mode ".concat(u," -> ").concat(d," "))}else r.$loader.configs.flgDev&&console.log("No quota change due to free-mode, instead applying rate-limit")}},e&&a.readAsDataURL(e)},__downloadImages:function(e){var t=this;return u()(l.a.mark((function e(){var i,r,n,a,s,c,u,d;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=f.a.create(),i.defaults.raxConfig={instance:i},r=p["a"](i),t.$loader.configs.flgDev&&console.log("interceptorId",r),n=t.mapResponseUpload,a=Object.keys(n).length-1,s=-1,c=l.a.mark((function e(){var i,r,n,c,m,g,p,h,b,v,_,y,$,k,x,P,S;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=o()(d[u],2),r=i[0],n=i[1],s=1+s,c=t.listMapProgress[s],m=c.datetimeStart,g=new Date-m,p=t.maxSLO-g,h=Math.round(p/1e3),b=Math.round(t.calcTrialDL(1,3,-4*h)),v=Math.max(b,t.minRetry),t.$loader.configs.flgDev&&console.log("index",s),t.$loader.configs.flgDev&&console.log("URI",n["url_download"]),t.$loader.configs.flgDev&&console.log("msElapsed",g),t.$loader.configs.flgDev&&console.log("msLeft",p),t.$loader.configs.flgDev&&console.log("Raw-maxRetry",b),t.$loader.configs.flgDev&&console.log("maxRetry considering min-retry",v),_=1e3,y=0;case 17:if(!(y<v)){e.next=38;break}if($=c.error,k=!1,x="https://"+t.backendHostStore+n["url_download"],t.$loader.modules.utils.writeLog2Console(t,"countRetry=".concat(y,", mapProgress.error =").concat(c.error)),!$){e.next=26;break}return t.$loader.configs.flgDev&&console.log("failed to download, maybe timeout, break loop"),y=v,e.abrupt("break",38);case 26:return t.$loader.configs.flgDev&&console.log("urlDownload",x),e.next=29,f()({url:x,method:"GET",responseType:"blob"}).then((function(e){var i=e.data;t.___saveDownloadedImage(i,n.filename,r),t.$loader.configs.flgDev&&console.log("successfully get prediction",r),t.maxPercentProgress=Math.min(.999,t.maxPercentProgress+Math.random()/10),a===s&&(t.$loader.configs.flgDev&&console.log("set maxPercentProgress to 1"),t.maxPercentProgress=1,t.listMapProgress=t.listMapProgress.map((function(e){return w(w({},e),{},{percent:1})})),t.$messenger.notifyWithPop(t,t.$t("predictor/downloader/message/on_success/1")),t.$store.commit("predictor/SetPredictorStep",3)),k=!0})).catch((function(e){t.$loader.configs.flgDev&&console.error("fail download",r),t.$loader.configs.flgDev&&console.error(e)}));case 29:if(!k){e.next=31;break}return e.abrupt("break",38);case 31:return _=1e3+500*y,t.$loader.modules.utils.writeLog2Console(t,"numberSleep=".concat(_)),e.next=35,t.sleep(_);case 35:y++,e.next=17;break;case 38:P=t.listMapProgress.every((function(e){return 1===e.percent})),!0!==P&&(t.listMapProgress=t.listMapProgress.map((function(e){return w(w({},e),{},{error:!0,color:"negative"})})),t.$messenger.notifyWithPop(t,t.$t("predictor/downloader/message/on_fail/1")),t.$store.commit("predictor/SetPredictorStep",1),S=t.$loader.modules.utils.deleteKeyFromUserStorage(t,"timestamp/prediction"),t.$loader.configs.flgDev&&console.log("flg_success_delete_key = "+S));case 40:case"end":return e.stop()}}),e)})),u=0,d=Object.entries(n);case 9:if(!(u<d.length)){e.next=14;break}return e.delegateYield(c(),"t0",11);case 11:u++,e.next=9;break;case 14:case"end":return e.stop()}}),e)})))()},_uploadFiles:function(){var e=this,t=this.listImage,i=this.listFile,r=new FormData,n=null;"id_ticket"in this.mapTicket&&(n=this.mapTicket.id_ticket);var a=this.$store.getters["ticket/getFP"],s=this.$loader.modules.utils.getValFromUserStorage(this,"test/hmac"),l=a||s,c="",u="",d=null;if(null!==n&&void 0!==n&&(c=n,u="ticket",d=new Blob([c],{type:"text/plain"}),this.$loader.configs.flgDev&&console.log("add ticket blob"),r.append(u,d,u)),null!==l&&void 0!==l)c=l,u="HMAC",d=new Blob([c],{type:"text/plain"}),r.append(u,d,u),this.$loader.configs.flgDev&&console.log("add HMAC blob");else if(null!==n&&void 0!==n)return this.$messenger.notifyWithPop(this,"Unkown Error. UF640."),!1;var m=this.getMapSetting||{},g=m["list_str_setting_ai"];if(g&&n){var p="option",h=g.join(","),b=new Blob([h],{type:"text/plain"});r.append(p,b,p),this.$loader.modules.utils.writeLog2Console(this,"add blob in payloads -> ".concat(g))}for(var v=0;v<i.length;v++){var _=t[v],y=i[v].name,$=v+1;r.append("files_"+$,_,y)}this.$loader.modules.utils.setVal2Cookie(this,"test","hello wor1d "),f.a.post(this.getUrl(),r,{headers:{"Content-Type":"multipart/form-data; boundary=".concat(r._boundary)}}).then((function(t){if(202===t.status){e.mapResponseUpload=t.data,e.$loader.modules.utils.writeLog2Console(e,"successfully get response from initializer"),e.$loader.modules.utils.writeLog2Console(e,t),e.$loader.configs.flgDev&&console.log("successfully get response"),e.maxPercentProgress=2.69*e.maxPercentProgress,e.listMapProgress=e.listMapProgress.map((function(e){return w(w({},e),{},{percent:.333})}));for(var i=0,r=Object.entries(e.mapResponseUpload);i<r.length;i++){var n=o()(r[i],2),a=(n[0],n[1]),s=a["list_option"]||[];e.$loader.modules.utils.writeLog2Console(e,"in download image check listOption from backend"),e.$loader.modules.utils.writeLog2Console(e,s),s.indexOf("v1plus")>-1&&e.$messenger.notifyWithPop(e,e.$t("predictor/downloader/message/on_processing/v1plus"),6e3);break}setTimeout((function(){return e.__downloadImages(e)}),e.NumberLeadTimeDownload)}else{var l=t.data||{},c=l["message"]||"UF1036. Unknown Error.";c.indexOf("Error 693")>-1&&(c=e.$t("predictor/api/initializer/on_fail/corrupt/693")),c.indexOf("Error 735")>-1&&(c=e.$t("predictor/api/initializer/on_fail/corrupt/735")),c.indexOf("buy another")>-1&&(c=e.$t("predictor/api/initializer/on_limit/paid_user")),c.indexOf("Please wait for")>-1&&(c=e.$t("predictor/api/initializer/on_limit/free_user")),203===t.status&&(c=e.$t("predictor/ratelimiter/free/message/in_limiting/3_1")),c+="UF1094.",e.$messenger.notifyWithPop(e,c)}})).catch((function(t){e.$loader.configs.flgDev&&console.error(t),e.listMapProgress=e.listMapProgress.map((function(e){return w(w({},e),{},{error:!0,color:"negative"})}));try{var i=t.response.data.message;e.$messenger.notifyWithPop(e,i)}catch(n){e.$messenger.notifyWithPop(e,"Unkown Error. UFAT700.")}clearTimeout(e.flgDownloading);var r=e.$loader.modules.utils.deleteKeyFromUserStorage(e,"timestamp/prediction");e.$loader.configs.flgDev&&console.log("flg_success_delete_key = "+r)}))},checkFileSize:function(){for(var e=!0,t=this.listFile,i=this.listImage,r=0,n=0;n<t.length;n++){var a=t[n],o=i[n],s=o.size;s>this.maxSizeFile&&this.$loader.configs.flgDev&&console.log(" file = ".concat(a.name," hit file size limit in single file: ").concat(s/1e3," > ").concat(this.maxSizeFile/1e3," ")),s<3333&&this.$loader.configs.flgDev&&console.log("delete file=".concat(a.name," hit file size limit in single file  due to blank file: ").concat(s/1e3," ")),r+=s}return r>this.maxSizeFile&&(e=!1,this.$loader.configs.flgDev&&console.log("hit file size limit in total files: ".concat(r/1e3," > ").concat(this.maxSizeFile/1e3," ")),this.$messenger.notifyWithPop(this,this.$t("predictor/size_cheker/message/on_fail/1"))),r<6666&&(e=!1,this.$loader.configs.flgDev&&console.log("file is blank"),this.$messenger.notifyWithPop(this,this.$t("predictor/size_cheker/message/on_fail/blank"))),e},upload:function(){var e=this;return u()(l.a.mark((function t(){var i,r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve(e._get_image_from_cropper());case 2:if(e.listImage=t.sent,i=e.checkFileSize(),!1!==i){t.next=6;break}return t.abrupt("return");case 6:r=e._checkRatelimiting(e),Promise.resolve(r).then(function(){var t=u()(l.a.mark((function t(i){var r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!1!==i){t.next=5;break}return e.$loader.configs.flgDev&&console.log("in rate limiting"),t.abrupt("return",null);case 5:!0===i&&(clearTimeout(e.flgProgressing),r=e.listMapProgress.every((function(e){return 1===e.percent})),e.listMapProgress=e.listMapProgress.map((function(e){return w(w({},e),{},{error:!1,color:"primary",percent:!0===r?0:e.percent,datetimeStart:new Date})})),e.maxPercentProgress=e.$loader.configs.predictor.maxPercentProgress,e.flgProgressing=setTimeout(e._updatelistMapProgress(),0),e._uploadFiles());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$loader.configs.flgDev&&console.error(t),e.$messenger.notifyWithPop(e,"U1151. Unkown Error.")}));case 8:case"end":return t.stop()}}),t)})))()}},beforeDestroy:function(){clearTimeout(this.flgProgressing)}},k=$,x=k,P=(i("3622"),i("2877")),S=i("7d53"),C=i("0016"),D=i("b047"),R=i("6b1d"),O=i("cb32"),L=i("05c0"),q=i("9c40"),I=i("8572"),T=i("eebe"),U=i.n(T),F=Object(P["a"])(x,r,n,!1,null,"654058dc",null);t["a"]=F.exports;U()(F,"components",{QFile:S["a"],QIcon:C["a"],QChip:D["a"],QLinearProgress:R["a"],QAvatar:O["a"],QTooltip:L["a"],QBtn:q["a"],QField:I["a"]})},a278:function(e,t,i){"use strict";var r=i("f62a"),n=i.n(r);n.a},a2c5:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-xs q-gutter-md  "},[i("div",{staticClass:"buttons-social-sns row justify-center "},[i("ShareNetwork",{attrs:{network:"Twitter",title:e.strTitle,url:e.strURLBase}},[i("q-icon",{attrs:{name:e.fabTwitterSquare,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Weibo",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fabWeibo,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Facebook",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fabFacebookSquare,size:e.strSizePx,color:"primary"}})],1)],1),i("div",{staticClass:"buttons-social-messe row justify-center "},[i("ShareNetwork",{attrs:{network:"WhatsApp",title:e.strTitle,url:e.strURLBase}},[i("q-icon",{attrs:{name:e.fabWhatsappSquare,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Telegram",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fabTelegram,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Line",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fabLine,size:e.strSizePx,color:"primary"}})],1)],1),i("div",{staticClass:"buttons-social-old row justify-center "},[i("ShareNetwork",{attrs:{network:"HackerNews",title:e.strTitle,url:e.strURLBase}},[i("q-icon",{attrs:{name:e.fabHackerNewsSquare,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Reddit",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fabRedditSquare,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Email",url:e.strURLBase,title:e.strTitle}},[i("q-icon",{attrs:{name:e.fasEnvelopeSquare,size:e.strSizePx,color:"primary"}})],1),i("ShareNetwork",{attrs:{network:"Sms",title:e.strTitle,url:e.strURLBase}},[i("q-icon",{attrs:{name:e.fasSms,size:e.strSizePx,color:"primary"}})],1)],1)])},n=[],a=i("d272"),o={name:"ListButtonSocial",components:{},data:function(){return{strURL:document.location.href,strLunkURL:"",fabFacebookSquare:a["a"],fabTwitterSquare:a["f"],fabWeibo:a["g"],fabLine:a["c"],fabTelegram:a["e"],fabWhatsappSquare:a["h"],fasSms:a["j"],fasEnvelopeSquare:a["i"],fabRedditSquare:a["d"],fabHackerNewsSquare:a["b"]}},props:{strURLBase:{type:String,default:function(){return window.location.origin}},strTitle:{type:String,default:function(){return this.$t("index/ceo/title")}},strSizePx:{type:String,default:function(){return"48px"}}},computed:{},methods:{}},s=o,l=i("2877"),c=i("0016"),u=i("eebe"),d=i.n(u),m=Object(l["a"])(s,r,n,!1,null,null,null);t["a"]=m.exports;d()(m,"components",{QIcon:c["a"]})},a78d:function(e,t,i){},b3a2:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:" advertise"},[1===e.strIdAd?i("div",{staticClass:"_id1"},[e.getFlgMobile?i("div",{staticClass:"mob"},[i("iframe",{attrs:{crossOrigin:"anonymous",src:'//a.exdynsrv.com/iframe.php?idzone=3814087&size=300x50&tags="AI,app,sexy"',width:"300",height:"50",scrolling:"no",marginwidth:"0",marginheight:"0",frameborder:"0"}})]):e._e(),e.getFlgMobile?e._e():i("div",{staticClass:"desk"},[i("iframe",{attrs:{crossOrigin:"anonymous",src:'//a.exdynsrv.com/iframe.php?idzone=3814097&size=468x60&tags="AI,app,sexy"',width:"468",height:"60",scrolling:"no",marginwidth:"0",marginheight:"0",frameborder:"0"}})])]):e._e(),2===e.strIdAd?i("div",{staticClass:"_id2"},[i("ViewAdExoNative")],1):e._e(),3===e.strIdAd?i("div",{staticClass:"_id3"},[i("ViewAdTstarNative")],1):e._e()])},n=[],a=(i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"ad-exo"}})}),o=[],s={name:"ViewAdExoNative",data:function(){return{}},mounted:function(){var e=document.getElementById("ad-exo"),t=document.createElement("script");t.setAttribute("src","https://a.exdynsrv.com/nativeads-v2.js"),t.setAttribute("type","application/javascript"),t.setAttribute("data-idzone","3828835"),t.setAttribute("ad_tag","app,entertainment,AI,sexy"),e.appendChild(t)}},l=s,c=i("2877"),u=Object(c["a"])(l,a,o,!1,null,null,null),d=u.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"ts_ad_native_yg35fb"}})},g=[],f={name:"ViewAdTstarNative",data:function(){return{html:"\n      NativeAd(\n        {\n          element_id: 'ts_ad_native_yg35fb',\n          spot: '496d9af6f4094cfb8aed24da7fc4e9ef',\n          type: 'label-under',\n          cols: 3,\n          rows: 1,\n          title: 'Suggested for you',\n          titlePosition: 'left',\n          adsByPosition: 'right',\n          breakpoints: [\n            {\n              'cols': 1,\n              'width': 770\n            }\n          ],\n          // keywords: '{ dating, }',\n          showLogoInfo: true,\n          styles: {\n            'label': {\n              'font-family': \"'MS Sans Serif', Geneva, sans-serif\"\n            },\n            'headlineLink': {\n              'color': '#ff0088',\n              'font-weight': 'normal'\n            },\n            'brandnameLink': {\n              'color': '#610737'\n            }\n          }\n        }\n      )\n"}},mounted:function(){var e=document.getElementById("ts_ad_native_yg35fb"),t=document.createElement("script");t.setAttribute("src","//cdn.tsyndicate.com/sdk/v1/n.js"),e.appendChild(t),t.onload=function(){NativeAd({element_id:"ts_ad_native_yg35fb",spot:'"496d9af6f4094cfb8aed24da7fc4e9ef',type:"label-under",cols:3,rows:1,title:"",titlePosition:"left",adsByPosition:"right",breakpoints:[{cols:1,width:770}],showLogoInfo:!0,styles:{label:{"font-family":"'MS Sans Serif', Geneva, sans-serif"},headlineLink:{color:"#ff0088","font-weight":"normal"},brandnameLink:{color:"#610737"}}})}}},p=f,h=Object(c["a"])(p,m,g,!1,null,null,null),b=h.exports,v={name:"ViewAd",components:{ViewAdExoNative:d,ViewAdTstarNative:b},data:function(){return{flgAlive:!0,sizeScreen:[this.$q.screen.height,this.$q.screen.width],flgMobile:this.$q.screen.width<=500}},props:{strIdAd:Number},methods:{checkAlive:function(){return!0}},computed:{getFlgMobile:{get:function(){return this.flgMobile}}}},_=v,y=Object(c["a"])(_,r,n,!1,null,null,null);t["a"]=y.exports},ba79:function(e,t,i){},c7f0:function(e,t,i){"use strict";var r=i("7c8a"),n=i.n(r);n.a},e16a:function(e,t,i){"use strict";var r=i("eb80"),n=i.n(r);n.a},e92f:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-xs q-gutter-md  "},[i("div",{staticClass:"row justify-center  items-center"},[i("div",{staticClass:"col-auto buttons-save "},[i("q-btn",{attrs:{label:e.$t("list_button_image/button/save/label"),color:"primary"},on:{click:e.saveItem}})],1),e.flgShowButtonDeletion?i("div",{staticClass:"col-1 spaces "}):e._e(),e.flgShowButtonDeletion?i("div",{staticClass:"col-auto buttons-delete "},[i("q-btn",{attrs:{label:e.getLabelButtonDeletion,color:"primary",loading:e.flgRequestingDeletion,disable:e.flgDisableButtonDeletion},on:{click:e.deleteItem}})],1):e._e(),e.flgShowButtonRedeem?i("div",{staticClass:"col-1 spaces "}):e._e(),e.flgShowButtonRedeem?i("div",{staticClass:"col-auto buttons-redeem "},[i("q-btn",{attrs:{label:e.getLabelButtonRedeem,color:"primary",loading:e.flgRequestingRedeem,disable:e.getFlgDisableButtonRedeem},on:{click:e.redeemItem}})],1):e._e()]),i("div",{staticClass:"row justify-center  items-center scoring-box "},[e.flgRequestingRedeem?i("div",{key:"loading",staticClass:"col-auto"},[i("q-skeleton",{staticClass:"bg-primary",attrs:{width:"200px",height:"100px"}})],1):e._e(),e.flgCompleteRedeem?i("div",{key:"text",staticClass:"col-auto"},[i("q-card",{staticClass:"my-card",attrs:{bordered:!1,flat:!0}},[i("q-card-section",{staticClass:"bg-white text-primary text-center",staticStyle:{"font-size":"xxx-large","font-weight":"bold","text-align":"center"}},[i("div",{staticClass:"text-h5 text-primary text-center"},[e._v(" "+e._s(this.getLabelScoreRedeem)+" ")]),i("div",{staticClass:"text-h1 text-primary text-center"},[e._v(e._s(this.numberScoreRedeem))]),i("q-separator",{attrs:{inset:""}})],1)],1)],1):e._e()]),i("div",{staticClass:"row justify-center  items-centerbuttons-url "},[i("div",{key:"text",staticClass:"col-8"},[i("q-input",{attrs:{outlined:"",dense:"",value:e.getLinkURL,standout:""}})],1),i("div",{key:"space",staticClass:"col-auto color-white"},[e._v("\n         \n    ")]),i("div",{key:"buttons",staticClass:"col-auto"},[i("q-btn",{attrs:{label:e.$t("list_button_image/button/copy/label"),color:"primary"},on:{click:e.copyLink}})],1)]),i("div",{staticClass:"row justify-center  items-centerbuttons-social"},[i("ListButtonSocial",{attrs:{strURLBase:e.getLinkURL}})],1)])},n=[],a=i("f3e3"),o=i.n(a),s=(i("ac6a"),i("cadf"),i("ffc1"),i("a481"),i("551c"),i("06db"),i("967e")),l=i.n(s),c=(i("96cf"),i("fa84")),u=i.n(c),d=(i("6762"),i("2fdb"),i("20d6"),i("cdde")),m=i("a2c5"),g={name:"ListButtonForImage",data:function(){return{strURL:document.location.href,strLunkURL:"",numberClickDeletion:0,flgRequestingDeletion:!1,flgDisableButtonDeletion:!1,flgCompleteDeletion:!1,flgRequestingRedeem:!1,flgDisableButtonRedeem:!1,flgCompleteRedeem:!1,numberScoreRedeem:null}},components:{ListButtonSocial:m["a"]},props:{strImageBase64:{type:String,default:""},strURLBase:{type:String,default:function(){return window.location.origin}},strHash:{type:String,default:"xxx"},strNameFile:{type:String,default:"file"},flgShowButtonDeletion:{type:Boolean,default:!1},flgShowButtonRedeem:{type:Boolean,default:!1}},computed:{getLinkURL:function(){var e=this.strURLBase+"/"+this.strHash,t=this.$loader.modules.utils.getValFromUserStorage(this,"crp/id_crp");return t&&(e+="?ref=".concat(t)),e},getLabelButtonDeletion:function(){var e=this.$t("list_button_image/button/deletion/label/1");return this.numberClickDeletion>0&&(e=this.$t("list_button_image/button/deletion/label/2")),e},getLabelButtonRedeem:function(){var e=this.$t("list_button_image/button/redeem/label/1");return e},getLabelScoreRedeem:function(){var e=this.$t("list_button_image/card/redeem/score/label");return e},getFlgAvailableRedeem:function(){var e=this,t=!1,i=this.$store.getters["ticket/getMapTicket"]||{},r=i["list_hash_predicted"],n=null;if(r&&(n=r.findIndex((function(t){return t.includes(e.strHash)}))),-1!==n&&null!==n){var a=i["list_score"],o=i["list_flg_request_redeem"],s=a[n],l=o[n];s&&!l&&(t=!0,this.$loader.modules.utils.writeLog2Console(this,"getFlgAvailableRedeem: set True due to score exists and not yet redeemded: numberScore=".concat(s," flgRedeem=").concat(l))),this.$loader.modules.utils.writeLog2Console(this,"getFlgAvailableRedeem:  serched hash=".concat(this.strHash," in list to get available flg : numberIndexHash=").concat(n," : flgAvailableRedeem=").concat(t," <- numberScore=").concat(s,", flgRedeem=").concat(l))}else t=!0,this.$loader.modules.utils.writeLog2Console(this,"getFlgAvailableRedeem:  :set True due to not found hash=".concat(this.strHash," in ticket : flgAvailableRedeem=").concat(t," "));var c=i["n_quota_inpaint_image_remaining"];return(c<=0||!c)&&(t=!1,this.$loader.modules.utils.writeLog2Console(this,"getFlgAvailableRedeem: set to false due to quota not exists : ".concat(c))),t},getFlgDisableButtonRedeem:function(){var e=this.flgDisableButtonRedeem,t=this.getFlgAvailableRedeem,i=!t||e||this.flgCompleteRedeem;return this.$loader.modules.utils.writeLog2Console(this,"getFlgDisableButtonRedeem : flgAvailableRedeem=".concat(t,", flgDisableButtonRedeem=").concat(e," , this.flgCompleteRedeem=").concat(this.flgCompleteRedeem,"-> flg=").concat(i)),i}},methods:{copyLink:function(){var e=this,t=this.getLinkURL;Object(d["a"])(t).then((function(){e.$messenger.notifyWithPop(e,e.$t("list_button_image/message/on_copy_link"))})).catch((function(){}))},saveItem:function(){var e=this;return u()(l.a.mark((function t(){var i,r,n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=!1;try{r=document.createElement("a"),r.download=e.strNameFile,r.href=e.strImageBase64,r.click(),i=!0,e.$messenger.notifyWithPop(e,e.$t("list_button_image/message/on_save"))}catch(a){i=!1,e.$loader.configs.flgDev&&console.log(a)}!0===i?e.$loader.configs.flgDev&&console.log("successfully save item "):e.$loader.configs.flgDev&&console.log("fail save item "+e.strNameFile),n=e.$loader.modules.utils.getValFromUserStorage(e,"test/save"),n>=0?n+=1:n=1,e.$loader.modules.utils.setVal2UserStorage(e,"test/save",n),e.$loader.configs.flgDev&&console.log("save counter =  "+n);case 7:case"end":return t.stop()}}),t)})))()},deleteItem:function(){var e=this;return u()(l.a.mark((function t(){var i,r,n,a,o,s,c,u,d,m,g,f,p;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.numberClickDeletion>0)){t.next=5;break}e.flgRequestingDeletion=!0,e.flgDisableButtonDeletion=!0,t.next=9;break;case 5:return e.numberClickDeletion+=1,e.flgDisableButtonDeletion=!0,setTimeout((function(){e.flgDisableButtonDeletion=!1}),900),t.abrupt("return");case 9:return i=e.$loader.modules.utils.generateMapPayload(e),r=[e.strHash],i["list_hash"]=r,e.$loader.modules.utils.writeLog2Console(e,"mapPayload from deletion endpoint in buttuns for images"),e.$loader.modules.utils.writeLog2Console(e,i),t.next=16,Promise.resolve(e.$loader.modules.requests.sendRequest4General(e,"/request/delete",i));case 16:n=t.sent,a=n.data,e.$loader.modules.utils.writeLog2Console(e,"mapResponse from deletion endpoint in buttuns for images"),e.$loader.modules.utils.writeLog2Console(e,a),o=null,s=null,c=null,u=null;try{o=a["message"],s=a["n_total"],c=a["n_deleted"],u=a["flg_invalid"]}catch(l){}if(o&&c>0){t.next=29;break}return u?(d=o.replace(/\./g,".<br>"),e.$messenger.notifyWithPop(e,d)):e.$messenger.notifyWithPop(e,e.$t("common/api/request/on_error/busy")),setTimeout((function(){e.flgRequestingDeletion=!1,e.flgDisableButtonDeletion=!1}),9e3),t.abrupt("return",null);case 29:e.flgRequestingDeletion=!1,c>0?(o=e.$t("list_button_image/api/deletion/on_success/2"),s===c&&(o=e.$t("list_button_image/api/deletion/on_success/1")),u&&(o=a["message"])):o="DI307.<BR>"+o,e.$messenger.notifyWithPop(e,o),m=e.$loader.modules.utils.getValFromUserStorage(e,"misc/list_hash"),m=m||[],m.push(e.strHash),e.$loader.modules.utils.setVal2UserStorage(e,"misc/list_hash",m),g=e.$loader.modules.utils.getPermissionLimitting(e,"show_dialog_after_deletion_hint",e.$loader.configs.message.minIntervalShowDialogPrivacyInit),g<=0&&(f=e.$t("list_button_image/dialog/deletion_cache/title"),p=[e.$t("list_button_image/dialog/deletion_cache/message/1"),e.$t("list_button_image/dialog/deletion_cache/message/2")],setTimeout((function(){e.$loader.modules.utils.showDialog(e,f,p)}),3e3));case 38:case"end":return t.stop()}}),t)})))()},redeemItem:function(){var e=this;return u()(l.a.mark((function t(){var i,r,n,a,s,c,u,d,m,g,f,p,h,b,v,_,y,w,$,k;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.flgRequestingRedeem=!0,e.flgDisableButtonRedeem=!0,i=e.$loader.modules.utils.generateMapPayload(e),r=[e.strHash],i["list_hash"]=r,e.$loader.modules.utils.writeLog2Console(e,"mapPayload from Redeem endpoint in buttuns for images"),e.$loader.modules.utils.writeLog2Console(e,i),t.next=9,Promise.resolve(e.$loader.modules.requests.sendRequest4General(e,"/request/redeem",i));case 9:n=t.sent,a=n.data,e.$loader.modules.utils.writeLog2Console(e,"mapResponse from Redeem endpoint in buttuns for images"),e.$loader.modules.utils.writeLog2Console(e,a),s=null,c=null,u=null,d=null,null,m=null,g=null,f=null,p=null,h=null;try{s=a["message"],c=a["flg_redeemed"],u=a["flg_warn"],d=a["flg_fail"],a["flg_error"],m=a["flg_not_found"],g=a["n_score_latest"],f=a["n_quota_inpaint_image_remaining_old"],p=a["n_quota_inpaint_image_remaining_new"],h=a["str_datetime_request_redeem"]}catch(l){}if(s){t.next=28;break}return e.$messenger.notifyWithPop(e,e.$t("common/api/request/on_error/busy")),setTimeout((function(){e.flgRequestingRedeem=!1,e.flgDisableButtonRedeem=!1}),9e3),t.abrupt("return",null);case 28:if(e.flgRequestingRedeem=!1,e.flgCompleteRedeem=!0,e.numberScoreRedeem=g,e.$loader.modules.utils.writeLog2Console(e,"numberScore=".concat(g)),null!==g&&void 0!==g||(e.flgCompleteRedeem=!1),m)s=e.$t("list_button_image/api/redeem/on_404/1");else if(c&&p>f){for(s=e.$t("list_button_image/api/redeem/on_success/1"),s=s+"<br>"+e.$t("list_button_image/api/redeem/on_success/2/label")+" : ".concat(f," -> ").concat(p),b=e.$store.getters["ticket/getMapTicket"],v={},_=0,y=Object.entries(b);_<y.length;_++)w=o()(y[_],2),$=w[0],k=w[1],v[$]=k;v.n_quota_inpaint_image_remaining=p,e.$loader.modules.utils.setMap2UserStorageAndInmemory(e,"ticket",v)}else d&&h?s=e.$t("list_button_image/api/redeem/on_skip/3"):d&&u?s=e.$t("list_button_image/api/redeem/on_skip/2"):d&&(s=e.$t("list_button_image/api/redeem/on_skip/1"));e.$messenger.notifyWithPop(e,s),u&&(s=e.$t("list_button_image/api/redeem/on_warn/1"));case 36:case"end":return t.stop()}}),t)})))()}}},f=g,p=i("2877"),h=i("9c40"),b=i("293e"),v=i("f09f"),_=i("a370"),y=i("eb85"),w=i("27f9"),$=i("eebe"),k=i.n($),x=Object(p["a"])(f,r,n,!1,null,null,null);t["a"]=x.exports;k()(x,"components",{QBtn:h["a"],QSkeleton:b["a"],QCard:v["a"],QCardSection:_["a"],QSeparator:y["a"],QInput:w["a"]})},eb80:function(e,t,i){},f62a:function(e,t,i){}}]);